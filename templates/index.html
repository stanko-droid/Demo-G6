<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G6 - SLAY BLING EDITION</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <div class="cloud-container">
        <div class="cloud c1"></div>
        <div class="cloud c2"></div>
        <div class="cloud c3"></div>
        <div class="cloud c4"></div>
        <div class="cloud c5"></div>
    </div>

    <div class="container">
        <header style="text-align: center; margin-bottom: 50px;">
            <h1 class="bling-title">G6</h1>
            <div class="slay-tag">‚ú® SLAY ‚ú®</div>
            
            <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                <button id="musicBtn" onclick="toggleMusic()" class="gold-btn">PLAY MUSIC</button>
                <button onclick="nextJoke()" class="gold-btn" style="background: linear-gradient(45deg, #00ff00, #fcf6ba, #00ff00);">NEXT HUSTLE</button>
            </div>
        </header>

        <audio id="bgMusic" loop>
            <source src="{{ url_for('static', filename='muzik.mp3') }}" type="audio/mpeg">
        </audio>

        <div class="gold-card">
            <h3 class="gold-text-header">STREET WISDOM:</h3>
            <p id="joke-display" class="joke-text">Laddar din hustle...</p>
        </div>

        <!-- Subscribe Button Section -->
        <div style="text-align: center; margin: 40px 0; padding: 30px 20px; background: white; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
            <h2 style="font-size: 2rem; color: #333; margin-bottom: 15px; font-weight: 800;">Join Our Community</h2>
            <p style="font-size: 1.2rem; color: #666; margin-bottom: 25px;">Get the latest tech news & street wisdom</p>
            <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <a href="{{ url_for('public.subscribe') }}" style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; border-radius: 6px; font-size: 1.1rem; font-weight: 700; transition: all 0.3s; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">
                    ‚úâÔ∏è Subscribe Now
                </a>
                <a href="{{ url_for('public.subscribers') }}" style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; text-decoration: none; border-radius: 6px; font-size: 1.1rem; font-weight: 700; transition: all 0.3s; box-shadow: 0 4px 15px rgba(245, 87, 108, 0.4);">
                    üë• View Subscribers
                </a>
            </div>
        </div>

        <footer class="gold-footer">
            <p>PREMIER LEAGUE DEVOPS: {{ version }}</p>
        </footer>
    </div>

    <script>
        const jokes = {{ jokes|tojson }};
        const music = document.getElementById("bgMusic");
        const btn = document.getElementById("musicBtn");
        const jokeDisplay = document.getElementById("joke-display");
      
        function nextJoke() {
          const randomJoke = jokes[Math.floor(Math.random() * jokes.length)];
          jokeDisplay.style.opacity = 0;
          setTimeout(() => {
            jokeDisplay.innerHTML = `"${randomJoke}"`;
            jokeDisplay.style.opacity = 1;
          }, 200);
        }
      
        function toggleMusic() {
          if (music.paused) {
            music.play();
            btn.innerHTML = "STOP MUSIC";
          } else {
            music.pause();
            btn.innerHTML = "PLAY MUSIC";
          }
        }
      
        window.onload = nextJoke;
      
        let welcomePlayed = false;
      
        function playWelcomeG6() {
            console.log("playWelcomeG6 fired");

          if (welcomePlayed) return;
          welcomePlayed = true;
      
          const welcomeSound = new Audio("{{ url_for('static', filename='welcome.mp3') }}");
      
          const originalVolume = music.volume;
          if (!music.paused) music.volume = 0.2;
      
          welcomeSound.play().catch(e => console.log("Welcome blocked:", e));
      
          welcomeSound.onended = () => {
            if (!music.paused) music.volume = originalVolume;
          };
        }
      
        window.addEventListener('click', playWelcomeG6, { once: true });
      </script>
      
</body>
</html>